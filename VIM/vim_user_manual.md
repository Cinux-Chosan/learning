- 删除一个字符： x
- 删除一行： dd
- 合并两行： J(大写)
- 撤销上一次操作： u
      备注: 如 果 你 按 下"u"两 次 结 果 是 两 次 找 回 了 同
      样 的 字 符, 那 说 明 你 的Vim配 置 成Vi兼 容 模 式 了。
      在|not-compatible|可以找到这一问题的对策。 这个例子
      假设你的Vim使用的是Vim的方法。 如果你更喜欢老的Vi编
      辑器的做法, 你就要留心两者在这方面的细微差别。
- 重做 `CTRL + R`，与撤销相反，即撤销的撤销。
- 撤销对一行的全部操作： U

----

- 当前光标后追加： a
- 当前行下另起一行： o
- 当前行上另起一行： O

## 命令计数

      假设你要向上移动9行。 这可以用"kkkkkkkkk"或"9k"来完成。 事实
      上, 很多命令都可以接受一个数字作为重复执行同一命令的次数。 比如
      刚才的例子, 要在行尾追加三个感叹号, 当时用的命令是"a!!!<Esc>"。
      另一个办法是用"3a!<Esc>"命令。 3说明该命令将被重复执行3次。 同
      样, 删除3个字符可以用"3x"。 指定的数字要紧挨在它所要修饰的命令前
      面。

## 退出： ZZ

      要退出Vim, 用命令"ZZ"。
      该命令保存当前文件并退出Vim。
      备注: Vim不会象其它的编辑器那样, 自动为被编辑的文
      件生成一个备份。 如果你用"ZZ", Vim就会提交你对该文
      件所做出的修改。 并且无法撤消。 当然你也可以配置你
      的Vim让它也可以自动生成一个备份文件。 请参考|07.4|。

- 放弃修改并离开： `:q!`
- 放弃修改并重新载入文件原始内容： `:e!`
- 帮助文档： `:help`，或者 `F1`键，查看具体命令的帮助信息：`:help {subject}`，如 `:help CTRL-A`。要查找其它模式下的帮助, 使用一个模式前辍。 如果你想要看的是Insert模式下某个命令的帮助, 使用"i "前辍，如：`:help i_CTRL-H`，查看参数文档，使用 `-`前缀，如`:help -t`。特殊键用尖括号+描述性名字表示，如`:help i_<Up>`，如果看到了错误信息不明究竟，可以将错误 ID 传给命令，如 `:help E37`。

----

- 光标向后移动一个英文单词(在首字符)： w
- 光标向前移动一个英文单词(在首字符)： b (backward)
- 光标向后移动一个英文单词(在末尾字符)： e (end of word)
- 光标向前移动一个英文单词(在首字符)： ge

- 移动到行尾： $ (可以使用计数，2$移动到下一行行尾)
- 移动到当前行的第一个非空白字符： ^
- 移动到当前行首： 0 (数字0)

## 移动到指定字符

---

- 移动到指定字符上： f{字符}， f 即 find，fx 即find x，可以使用计数，`F` 与之反向
- 移动到指定字符前一个字符： t{字符}，t 即 to，`T` 与之反向

这四个命令都可以使用 `;` 来重复，也可以使用 `,` 来重复，但是方向与原命令相反

---

## 匹配括号的移动

- 移动到与当前括号的另一半： %

## 移动到指定行

- 移动到指定行： {行号}G，G 即 Go，如果没有指定行号，则会移动到最后一行
- 移动到第一行： gg
- 移动到文件的某个范围：{百分数}%，如 50% 会移动到文件中间。
- 移动到当前屏幕内容的某个范围： H(home)、M(middle)、L(last)

## 当前位置

- `CTRL-G`：显示正在编辑的文件名，行列号，总行数，所在文件百分比等
- `:set number`，可以使用 `:set nonumber` 关闭
- `:set ruler`：在窗口右下角显示当前光标位置

## 滚动屏幕

- `CTRL-F`：向前滚动一整屏
- `CTRL-B`：向后滚动一整屏
- `CTRL-U`：文本向下滚动半屏
- `CTRL-D`：将窗口向下移动半屏，相当于文字向上滚动了半屏
- `CTRL-E`：向上滚动一行，E 即 Extra
- `CTRL-Y`：向下滚动一行，Windows 上可能该命令映射为重做
- 将当前行置于屏幕中央： `zz`（当前行为最后一行的时候，方便查看）
- 将当前行置于屏幕上方： `zt`
- 将当前行置于屏幕下方： `zb`

## 搜索

- 向后搜索字符串： `/{字符串}`
  - 下一个： `n`，可以接受计数
  - 上一个： `N`

```
    备注: 字符.*[]^%/?~$ 有特殊意义, 如果你要找的东西
    包括这些内容, 要在这些字符前面放置一个反斜杠。 见下
    文。
```

- 向前搜索字符串： `?{字符串}`
- 忽略大小写： `:set ignorecase`
- 匹配大小写： `:set noignorecase`

## 历史命令记录

输入命令的标记，如 `/` 、`?` 或者 `:`，然后按上下箭头键，会在历史纪录中切换。

如果输入一部分，则会匹配一部分，如执行过命令 `:set number`、`:set nonumber`，则输入 `:set` 然后按上下键会在使用 `:set` 的命令中循环。

## 搜索特定单词

- 向下搜索当前单词： `*`，接受计数
- 向上搜索当前单词： `#`

默认情况下， `/` 来搜索字符串，会搜索出一些出现在其它字符串中的子字符串，但是如果加上 `\>` 即可，它匹配到单词的末尾，相反的 `\<` 匹配到开始处。`*` 和 `#` 会默认使用这个标记，可以使用 `g*` 或者 `g#` 来匹配包含在其它字符串中的字符。

## 高亮搜索结果

- `:set hlsearch`： 开启搜索高亮，hlsearch 即 high light search
- `:set nohlsearch`： 关闭搜索高亮
- `:set incsearch`： 在键入目标字符串的过程中Vim就同时开始了搜索工作
- `:set nowrapscan`： 使搜索过程在文件结束时就停止。 或者, 在你反向搜索时在到达文件开头时停止。 'wrapscan'选项的默认值是开, 这样搜索在达到文件的头尾时都会绕向另一个方向继续进行。

## 设置初始参数

- `:scriptnames`： 查看插件和 vim 的配置文件路径
- `:edit ~/.vimrc`： 编辑 vim 配置文件
- `Go:set hlsearch`： G 跳到文件尾，o 另起一行，写入命令 `:set hlsearch`，即在文件后面添加了一行，内容为 `:set hlsearch`
- `ZZ` 保存。

下次启动 vim 时， `hlsearch` 选项就是打开的了。

## 简单搜索模式

- `^`：匹配行首
- `$`：匹配行尾
- `.`：匹配任意字符

## 使用标记

每次使用 `G` 跳转的时候， vim 中会在起跳的位置设置一个标记。命令 \`\` (两个开引号) 可以使你跳回到出发点。再次使用 \`\` 还是回到上一次起跳点，因为 \`\` 本身也是跳转命令。一般来说，只要将光标定位到非本行，就是跳转。但是 `j` `k` 命令不会被视为跳转。

- `CTRL-O`： 跳转到前一次的光标位置。 O 即 older
- `CTRL-I`： 回到后来停置光
标的更新的位置，即与 `CTRL-O`相反。
- `:jumps`：列出曾经跳转过的位置列表，最后一个位置以 `>` 标记。

### 带名称的标记

- `m{a-z}`： 将当前行标记为 a-z 之一的字符，看不出来， Vim 内部记录了该标记。
- \`a： 跳转到标记处。
- `:marks`：罗列一些特别标记的列表。

---

# 移动文本、作出更改(第四章)

## 操作符命令和位移

- `d` : 删除，与位移操作联合使用
  - `d4w`（示例）：该组合命令删除当前光标之后 4 个单词，

- `c` ：与 d 类似，但是它在执行完成过后会进入 Insert 模式。如 `cw` 删除一个单词，并进入 Insert 模式。
  - `c2wbe<Esc>`（示例）：该组合命令讲解如下
    - `c` ：修改操作符
    - `2w`：移动两个单词，删除它们并开始进入 Insert 模式
    - `be`：插入 be 两个字符
    - `<Esc>`：回到 Normal 模式

## 快捷命令

有一些操作符+位移命令使用率是如此之高以至于它们以一个单独的
字符作为其快捷方式:

- x 代表dl(删除当前光标下的字符)
- X 代表dh(删除当前光标左边的字符)
- D 代表d$(删除到行尾的内容)
- C 代表c$(修改到行尾的内容)
- s 代表cl(修改一个字符)
- S 代表cc(修改一整行)

## 替换单个字符

- `r`：替换当前字符，也可以使用 `cl` 或者 `s`，但是 `r` 不再需要使用 `<Esc>` 回到 Normal 模式。
  - `5rx`（示例）：将5个字符替换为 x
  - `r<Enter>`：删除一个字符，替换为换行符，`4r<Enter>` 将4个字符替换为换行符。

## 重复改动

- `.`：重复上一次做出的改动。

      "."命令是Vim中一个简单而强大的命令。 它会重复上一次做出的改动。 例如, 假设你在编辑一个HTML文件, 想删除其中所有的<B>标签。 你把光标置于<B>的<字符上然后命令"df>"。 然后到</B>的<上用"."命令做同样的事。 "."命令会执行上一次所执行的更改命令( 此例中是"df>")。要删除另一个标签, 同样把光标置于<字符上然后执行"."命令即可。

      "."命令会重复你做出的所有修改, 除了"u"命令CTRL-R和以冒号开头的命令。

例子: 你想把"four"改为"five"。 它在你的文件里多次出现。 你可以用以下命令来做出修改:

- /four<Enter> ： 找到第一个字符串"four"
- cwfive<Esc> ：把它改为"five"
- n ：找到下一个字符串"four"
- . ：同样改为"five"
- n ：继续找下一个
- . ：做同样的修改

## Visual 模式

- `v` (小写)：进入 Visual 模式，移动光标以覆盖想要操作的文本范围（使用 hjkl 替代箭头键）。
  - `velld`（示例）：
    - `v`：进入 Visual 模式
    - `e`：选择到单词末尾
    - `ll`：向后继续选中两个字符
    - `d`：删除选中内容

### 选择多行 (V)

- `V` (大写)：大写的 V，对行进行选中，使用左右命令无意义，使用 jk 来进行行选中。
  - `Vjj`（示例）：V 进入行选中的 Visual 模式， jj 向下移动两行，该命令选中 3 行。

### 选择块 (CTRL-V)

- `CTRL-V`： 选择一个块，即竖直的块。

### Visual 模式的另一端

- `o`： 光标移动到选中区域的另一端。 o 即 other end
- `O`： 进行矩形块选择的时候，选中区域有 4 个角， `o` 在对角移动， `O` 在同一行两头。

## 移动文本

使用 `d` 或 `x` 删除的文本，本保存起来，可以使用 `p`（put）命令取回。

- `p`： 取回删除内容，置与光标后，接受计数
- `P`： 同 `p`，但是是将内容放在光标前

## 交换两个字符

- `xp`(组合命令)： `x` 删除字符， `p` 将字符置于光标之后。

## 复制文本

- `y`： y 将文本复制到一个寄存器中，然后可以使用 `p` 取回内容。
  - `y2w` (示例)： 该命令复制两个单词。

注： `yw` 包含了单词后面的空格， `ye` 不包含。

- `yy`： 复制整行，与 `dd` 删除整行一样。

- `Y`： 也是复制整行，这与 `D` 只删除当前光标到行尾不一样。

## 使用剪贴板

在 `yy` 或者 `p` 前面加上一个 `"*`（双引号加星号），即可把内容置于剪切板。

**注：** 这些功能只有Vim支持剪贴板操作时才可用。

## 04.8 文本对象

如果光标处于单词中间，此时 `dw` 删除的只有光标之后的单词部分，如果需要快速删除整个单词，可以使用文本对象。

- `aw`： a word（一个单词）
- `as`： a sentence（一段文字，包括句子后面的空格）
- `is`： Insert Sentence（插入一段文字，不包括句子后面的空格）

- `cis`（示例）： 该组合命令删除当前段落并进入 Insert 模式开始写入内容。

## 替换文本 (R)

- `R`：进入 replace 模式，每个字符都会替换当前光标的字符，直到按 `<Esc>`来结束该模式。

## 总结

一些常用方法：

- `x` 删除当前光标下的字符("dl"的快捷命令)
- `X` 删除当前光标之前的字符("dh"的快捷命令)
- `D` 删除自当前光标至行尾的内容("d$"的快捷命令)
- `dw` 删除自当前光标至下一个word的开头
- `db` 删除自当前光标至前一个word的开始
- `diw` 删除当前光标所在的word(不包括空白字符)
- `daw` 删除当前光标所在的word(包括空白字符)
- `dG` 删除当前行至文件尾的内容
- `dgg` 删除当前行至文件头的内容

如果你用"c"命令代替"d"这些命令就都变成更改命令。
是yank(复制)命令, 如此类推。

- `~` 改变当前光标下字符的大小写，并将光标移至下一个字符。这不是一个操作符命令(除非你 设置了'tildeop'选项)，所以 你不能让它与一个位移命令搭配使用。但它可以在Visual模式下改变所有被选中的文本的大小写。
- `I` 将光标置于当前行第一个非空白字符处并进入Insert模式
- `A` 当光标置于当前行尾并进入Insert模式

---

# user_05.txt 定制 VIM

Vim可以根据每个人的喜好进行调整。 本章向你展示如何对Vim进行
不同的设置。 如何增加plugin来扩展它的功能。 以及如何定义你自己的
宏。

## vimrc

Vim 启动的时候会去读取该文件。如果找不到该文件，可以使用命令 `:scriptnames` 查看。

vimrc 文件里面可以包含在冒号命令行上使用的命令，最简单的就是对选项进行设置。比如你总是想在 Vim 打开的时候开启 `incsearch` 选项，就可以把下面这行加入 vimrc 文件：

`set incsearch`

- `set nocompatible`：本手册假设 Vim 在增强模式下运行，并不完全与 Vi 兼容，所以首先确保关闭 `compatible` 选项。

******************

**此处略过第 5 章《定制你的Vim》和 第 6 章 《使用语法高亮》**

******************

# 第 7 章 《编辑多个文件》

# 第 8 章 《分隔窗口》：

- `:split`： 打开一个新窗口
- `CTRL-W w` 或 `CTRL-W CTRL-W`：切换窗口
- `:close`：关闭窗口，事实上任何退出编辑的命令都会关闭窗口，但是 `:close` 会阻止你关闭最后一个 Vim，避免意外发生。
- `:only`：关闭当前窗口之外的其它所有窗口。
- `:split {文件名}`：为文件新开个窗口。
- `:new`：打开一个新窗口并开始编辑一个空缓冲区。

## 窗口大小

`:split`接受一个参数，用于指定打开的窗口高度：

- `3split alpha.c` (示例)：为文件 alpha.c 开启一个窗口，高度为 3 行。
- `CTRL-W +`： 增加当前窗口高度。接受计数
- `CTRL-W -`： 减小当前窗口高度。
- `{高度}CTRL-W _`： 指定到固定高度。不指定高度则让窗口达到其可能的最大高度。

另外，就是使用鼠标。。。。。。

### 相关选项

  'winheight'选项可以设置为一个你期望的最小的窗口高度. 'winminheight'则
用于设置一个强制的最小高度
  
  同样地, 有一对对应的选项:'winwidth'和'winminwidth', 分别用
于指定期望的最小窗口宽度和强制的最小窗口宽度.
  
  如果设置了'equalalways'选项, 则Vim在每次打开或关闭窗口之际都
会自动让所有窗口均摊屏幕上可用的高度和宽度.

## 垂直分隔

- `:vsplit`： 相对于 `:split`，`:vsplit` 垂直分隔窗口。
- `:vnew`： 相对于 `:new`，`:vnew` 垂直开启新缓冲区的窗口，等价命令为 `:vertical new` 

## 切换窗口

CTRL-W h 左边的窗口
CTRL-W j 下面的窗口
CTRL-W k 上面的窗口
CTRL-W l 右边的窗口
CTRL-W t 顶部的窗口
CTRL-W b 底部的窗口

## 移动窗口

- `CTRL-W K`：大写的K，将窗口向上提升一次。
- `CTRL-W J`：大写的J，将窗口向下降低一次。 
H、L 也是同理。

如果已经是多个垂直分隔的窗口，`CTRL-W K` 会将它们水平。

## 针对所有窗口的命令

- `:qall`："quit all"，如果这些窗口中有被修改又没保存的Vim 就不会退出.光标也会自动被定位到该窗口中.这样你可以用":write"保存修改,或用":quit!"放弃这些改动.
- `:wall`："write all"
- `:wqall`：`qall` 和 `wall` 的组合。

另外可以使用 `!` 来强制执行。

## 为每一个文件打开一个窗口

使用 `-o` 选项：

- `vim -o one.txt two.txt three.txt`（示例）: 为该 3 个文件每个都打开一个窗口。

使用 `-O` 选项为每个文件垂直打开窗口。

如果已经进入 Vim，则 `:all` 命令会为命令行上的每个文件各打开一个窗口。与之对应的垂直命令是 `:vertical all`

## 使用 vimdiff 查看不同

Vim 有一种特殊的启动方式，可以显示两个文件的不同之处。在某个文件中编辑，然后在打开 `backup` 选项的情况下保存文件，这样该文件的备份文件就会保留该文件此前的版本。然后在 shell 中使用命令查看：

`vimdiff {文件}~ {文件}`

会显示 2 个垂直分隔的窗口，没有被修改的行被折叠到单独的一行。
改变的行高亮显示，用于展示文件的不同。
"---" 表明该行删除

## 折叠的栏位

- `zo`： 展开折叠
- `zc`： 折叠

## 已经进入 Vim 后，需要比较不同

`:edit {文件名}`
`:vertical diffsplit {文件名}`： 让比较窗口垂直分隔

如果有个 patch 或者 diff 文件，还可以用第 3 种开始 diff 模式的方法：

`:edit {文件名}`：编辑该文件
`:vertical diffpatch {文件名.diff}`：告诉 Vim patch 的名字

注： patch 文件必须包含了单个文件的 patch，否则会看到一大堆错误，同时也可能把文件打上错误的补丁。

## 同步滚动

默认同步滚动，取消同步滚动可以使用下面的命令：

`:set noscrollbind`

## 跳到不同之处

- `]c`：定位到下一个不同之处，以一个数字为命令记数可以加快跳转的步伐。
- `[c`：定位到上一个不同之处。

## 消除差异

你可以在两个窗口中移动文字，这样会引起更多的文件变换，但是Vim 不会实时更新不同位置的高亮，使用命令手动刷新：

`:diffupdate`

消除不同之处，可以在左边窗口比右边多的以行上，执行 `dp`，即 diff put，两个文件的不同被消除了，接受了该修改。
还可以用另一个方法，就是在右边窗口中，到改变的位置，执行 `do` 也可以接受修改。 `do` 即 diff obtain。

## 其它

`laststatus` 选项用于指定何时最近使用的窗口会有一个状态行：

- 0 : 永远没有
- 1： 只有分隔窗口时（默认）
- 2： 总是存在

很多要打开另一个文件的命令都有一个变体, 可以新开一个窗口来
打开指定的文件. 对于命令行命令而言通常是在一般命令前面附加一
个"s". 例如":tag"可以跳转到一个tag, ":stag"则是打开一个新窗口跳
转到该tag.

对于Normal模式的命令是在命令前使用CTRL-W. CTRL-^可以跳转到前
一个编辑的文件, CTRL-W CTRL-^则分隔出一个窗口来编辑前一个文件.

'splitbelow'选项用来控制新开的窗口出现在当前窗口的下面.
相应地使新开的垂直窗口出现在当前窗口的右边
'splitright'则

分隔窗口命令还可以有一个位置修饰限定词作为前辍, 用来指定新打
开的窗口将出现的位置:
- `:leftabove {cmd}` 当前窗口的左边或上面
- `:aboveleft {cmd}`同上
- `:rightbelow {cmd}` 当前窗口的右边或下面
- `:belowright {cmd}` 同上
- `:topleft {cmd}` 当前窗口的上边或左边
- `:botright {cmd}` 当前窗口的下面或右边

