## 定位元素

- position 为 relative, absolute, fixed 的元素为定位元素。

## offsetParent

- 如果一个元素被定为了，那么它的 position 属性值不是 static，则该元素可以被看作一个 **容器元素** 。
- **容器元素** 的后代元素，其位置（left, top属性）参考容器元素，即后代元素的 **offsetParent** 。

### 浏览器如何确定元素的 offsetParent

一个元素的offsetParent 要么是 null，要么是 <body>，要么是该元素的某一个祖先定位元素。

- offsetParent 为 `null` 的情况
  - 该元素为 <body>
  - 元素不具有布局（如display:none）
  - 元素不存在于 DOM 中
  - 元素 position 为 fixed

``` html
  <div id="div1" style="display:none;"></div>
  <div id="div2" style="position:fixed"></div>
```

``` javascript
  var $body = $('body');
  console.log($body.offsetParent()[0]);  // <html>
  console.log($body[0].offsetParent);  // null

  var $div1 = $('#div1');
  console.log($div1.offsetParent()[0]);  // <html>
  console.log($div1[0].offsetParent);  // null

  var $div2 = $('#div2');
  console.log($div2.offsetParent()[0]);  // <html>
  console.log($div2[0].offsetParent);  // null
```

- offsetParent 为 `<body>`
  - 如果元素不是任何一个定位元素的后代，也不满足任何返回为 null 的条件，那么它的 offsetParent 为 <body>

- offsetParent 为某个祖先定位元素
  - 如果元素是定位元素的后代，那么离它最近的定位元素就是它的 offsetParent，如果元素不是定位元素的后代，却是 <td>、<th> 或者 <table> 元素的后代，则其offsetParent 就是最近的上述元素。

## z-index

### 渲染层

- 默认的渲染层位于 Z 轴的位置 0 上，如果一个渲染层 z-index 为负数，则位于默认渲染层之后。
- 当一个定位元素脱离了文档流，它仍然处于之前的渲染层中。定位仅仅影响元素在该渲染层中的堆叠次序。

#### 默认堆叠次序

- 根节点的背景和边框
- 文档流中的后代元素，按照 HTML 中出现的顺序
- 脱离文档流的定位后代元素，按照 HTML 中出现的顺序
- float 元素介于静态元素和定位元素之间

**注意**: z-index 仅仅在定位元素上有效




































































.
