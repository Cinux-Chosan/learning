# 第二章：选择器

### 伪类:

浏览器提供的能够区分元素不同状态的类。

- 如 `:link` `:visited` `:hover` `:active` `:chekced` `:focus` 等

### 伪元素:

能够在文档中插入假想的元素。

- 如 `:first-letter` `:first-line` `:before` `:after`

**提示：伪类和伪元素都是与当前选择的元素相关联，可能通常认为 `p:first-child` 之类的选择器会选择 p 元素的第一个子元素，然而并不是这样，伪类的实质是把某种假想的类关联到与伪类相关的元素 **

# 第三章：层叠和结构

选择器特殊性：

- ID > class|属性|伪类 > 元素|伪元素

通配符特殊性为 0，继承无特殊性。 所以通配符优先于继承的值:

```html
<style media="screen">
  * { color: red }
  h1#page-title{ color: blue }
</style>
<body>
  <!-- em 内的 Central 的颜色依然显示为通配符的 red -->
  <h1 id="page-title">Meerkat<em>Central</em></h1>
</body>
```

由于如果特殊性和权重等其他因素都相同的情况下，会按照出现的顺序来选择样式的优先级，所以建议按照 LVHA（link-visited-hover-active，现在改为 link-visited-focus-hover-active） 的顺序来什么链接样式：

```css
:link{ color: blue; }
:visited{ color: purple; }
:hover{ color: red; }
:active{ color: orange; }
```
因为如果按照下面的顺序，将永远不会显示 `:hover` 和 `:active`：

```css
:active{ color: orange; }
:hover{ color: red; }
:link{ color: blue; }
:visited{ color: purple; }
```
由于它们权重都相同，所以出现在后面的就会有较高的优先级。链接要么为未访问，那么就显示 `:link`，要么就为已访问，显示 `:visited`；`:active` 和 `:hover` 就被这两个属性给覆盖了。

**提示：除了按顺序，还可以增加特殊性，如 `:hover:link { color: red; }`**

# 第四章：值和单位

在CSS中，**相对 URL 要相对于样式表本身，而不是相对于使用该样式表的 HTML 文档**。

例如根目录有一个 index.html，它 link 了 css 目录下面的样式表文件，该样式表定义了一个元素背景图片位置，该图片位于根目录下的 pic 目录里，则这个 url 应该为 `../pic/图片名`， **道理很简单，如果我们是引用的公共 CDN 提供的样式表，那么撰写这个样式表的作者并不知道会被哪些人在什么地方的 HTML 文件中引用，他所能知道的仅仅是按照他当前的样式表文件来引用外部图片** ，否则不同的页面引用相同的外部样式，那么就完全无法预知图片的位置。（P97）

**提示：url 和开始括号 `(` 之间不能有空格，否则将导致整个声明都无效**

# 第五章：字体

### 字体系列：

它们并不是指定一种字体，而是指一类字体，这类字体有它们自己的共性：

- Serif：有上下短线
- Sans-serif：没有上下短线，感觉就像中文的黑体
- Monospace：字符间距相同，如 i 和 m 所占用的宽度一样
- Cursive：书上说是该字体试图模仿人的手写体，在 mac 上测试，和 Serif 没有什么差别，只是字体宽度要大一点。
- Fantasy：这一类字体无法用任何特征来定义

使用 `font-family` 指定字体顺序的时候，如果字体名带有空格和符号，应包含在引号内，通用字体系列名不能加引号，否则会被当做特定的字体而非字体系列对待。

### 字体加粗：

字体的粗细度从 100 ~ 900，梯度为 100，分别对应字体粗细的 9 个等级。但是一般字体可能只实现了其中的部分粗细等级，而没有完全实现 9 个等级，所以浏览器就会对它们进行映射：根据字体实现了的等级进行划分，`normal` 对应 400，`bold` 对应 700，**而 `bolder` 首先获取从父级继承的 `font-weight` 的值，然后取下一个对应的能看出加粗效果的等级，但无论如何都超不过 900** ，即便是计算下来的结果超过了 900 也会被替代为 900，因为它已经是最粗的等级，如果没有更粗的等级，则取下一级，如 700 已经达到该字体最粗等级，那么 `bolder` 将会是 800，`lighter` 与 `bolder` 相反。（具体规则参考 P107）

### 字体大小：

类似于 `bolder` `lighter`，字体大小也有 `larger` `smaller`，另外字体大小还有7个绝对大小关键字：`xx-small` `x-small` `small` `medium` `large` `x-large` `xx-large`，这些关键字并没有明确的定义，而是相对来定义的。另外，字体大小并没有限制，`larger` 完全可以大于 `xx-large`，这很明显，因为我们可以通过像素值来将字体指定为任意我们希望的值，Chrome 将最小值限制为 12px（可借助 CSS 的 transform 缩放将字体缩小到 12px 以下），其他浏览器则可能没有这种限制。

百分数值总是根据从父元素继承的大小来计算的，并且 **继承的值是计算过后得到的值，而非百分数值**，例如父元素是 24px，当前元素如果是 80% 那么就是 `24 * 80%` 得到 19.2px，它的子元素如果也是 80 % 那么得到的可能是 `19.2 * 80%` 也可能是 `19 * 80%`，这取决于不同的浏览器实现。

`font` 的声明必须包含 `font-size` 和 `font-family`，并且 font-size 必须在前面，font 规则的前三个属性（`font-style` `font-variant` `font-weight`）位置可以采用任意顺序。font 可以指定行高 `line-height`，它和 font-size 合并写在一起，并使用 `/` 分隔，并且 font-size 必须在前面。（个人建议如果不清楚 font 的规则应尽量避免直接使用 font）

一个 font 的例子：

```css
h2 { font: bold italic 200%/1.2 Verdana, Helvetica, Arial, sans-serif; }
```

# 第六章：文本属性

### 文本缩进：

`text-indent`

对块元素有效，对行内元素无效，对图像等替换元素也无效。

它可以使用所有的长度单位，如果使用百分数，则是相对于父元素的宽度来计算，如 `10%` ，则取父元素宽度的 `10%` 作为缩进。该元素会继承。

将该属性用于块元素，它内部的内联元素会显示出缩进。该属性可能使得缩进的元素的内容超出起父元素的范围或浏览器范围，它可以无限缩进而不会将浏览器或者父元素撑开。缩进行的第一个单词或者元素始终会出现在该行，而它后面的元素会在父元素的宽度范围内换行（将一个块元素的 `text-indent` 属性无限加大可以发现该效果，可能对缩进的处理实际上只是缩进第一个单词或者元素，它后面的元素跟在它后面正常顺延）。

### 水平对齐

`text-align`

除了 `left` `center` `right` 之外还有 `justify`，它会强制每一行的首尾与行的边界对齐，如果在行尾出现半个单词的情况，它会将该单词显示在下一行，而根据浏览器自身的实现来拉伸或压缩本行字符间距或者单词间距来促使左右边界对齐。

### 垂直对齐

`line-height`

该属性是指定文本行基线(`x-height`)之间的距离，它与字体大小之差就是行间距。

在用于块级元素时，`line-height` 定义了它里面的文本基线之间的 **最小** 距离，而不是一个绝对值，基线距离可能比 `line-height` 大。`line-height` 不影响替换元素布局，不过确实可以应用到替换元素。

每个文本行的文字都会生成一个内容区，由其中的字体大小决定。内容区会生成一个行内框（每个元素的内容区都会生成自己的行内框），如果不存在其他因素，这个行内框就完全等于该元素的内容区，然而 `line-height` 就可以增加或者减少行内框的高度。`line-height` 与内容区之间的差值会平分到内容区的顶部和底部来生成行间距，最后行框的高度就需要包含所有文字中最高的行内框和最低的行内框（示例图查看 P142）。

- **缩放因子** ：给 `line-height` 指定一个纯数字（不带单位）
由于 `line-height` 会继承，当一个块元素从另一个块元素继承 `line-height` 时，它的值会从父元素计算，而非在子元素上计算（因为继承之前就会将相对值计算为像素值），可能这个值对子元素来说并不合适，所以此时可以将 `line-height` 设置为一个数，这个数会被该元素以及它的子元素当做缩放因子并与自己的 font-size 相乘来计算出自己的 `line-height` 值。

### 垂直对齐文本

`vertical-align`

相对于 line-height 只能用于块级元素，`vertical-align` 只适用于行内元素和替换元素（如图像或表单输入元素），并且不继承。所有的垂直对齐元素都会影响行高，因为行框需要足以包含最高行内框顶端和最低行内框底端。

`vertical-align` 只接受 8 个关键字、一个百分数或一个长度值。

- `baseline`
  - 它是 `vertical-align` 的默认值。它要求元素的基线与父元素的基线对齐，这样看起来所有文本元素的底端都是对齐的。如果没有基线（如图像或者一些替换元素），则将该元素底端与父元素的基线对齐。

- `super、sub`
  - `super` 是上标，它将行内元素的基线（或替换元素的底端）相对于父元素的基线的向上提升，具体提升多少根据浏览器而异，不会改变元素的字体大小。sub 则是下标。

- `bottom`
  - 将元素的行内框的底端与行框的底端对齐。行内框包含文字的内容区和行间距，所以对文字应用 `bottom` 和 `top` 没有明显效果，因为它的行内框跟行框下边界都是重叠在一起的。

- `text-bottom`
  - 该关键字是指行内文本的底端。(P147)

- `top`
  - 与 `bottom` 相反

- `text-top`
  - 与 `text-bottom` 相反

- `middle`
  - `middle` 会把行内元素的中点与父元素基线上方 `0.5ex`（`ex`指所用字体中小写 x 的高度，这里 1ex 相对于父元素的 `font-size` 定义，浏览器可能把 1ex 方便的假设为 0.5em）处对齐。因为大多数浏览器把 1ex 处理为 0.5em，所以 `middle` 就在父元素的基线上方 0.25em 的地方对齐（不过有的浏览器确实会为各个元素精确计算 x-height）。(P148)

- 百分数（相对于 **自身** 的`line-height` 而非 `font-size`）
  - 该值会将元素的基线（或替换元素的底边）相对于父元素基线升高或者降低指定的量，这个量为 `该元素 line-height * 你指定的百分数`，而非相对于父元素的 `line-height`（内联元素不会响应 line-height，但是却可以用于 `vertical-align` 的计算）。正百分数使得元素基线升高，反之则降低。

- 长度值
  - 如 5px 则将元素升高 5 像素。负值使元素下降。

### 字、字母间隔

`word-spacing` 和 `letter-spacing`

它们的默认关键字 `normal` 都相当于 0；它们都会继承，但是无法为它们指定一个可继承的缩放因子，因此如果需要的效果不是继承值的效果，则需要显示指定它们的值。

`word-spacing` 是以空白字符进行区分的，所以它可能是非空白字符组成的字符串，像中文段落这种就可能达到的不是我们想要的效果了。所以要慎用。

`letter-spacing`

### 文本转换

`text-transform`

默认值为 `none`，对文本不做任何改动。

- `uppercase`: 全部转为大写
- `lowercase`：全部转为小写
- `capitalize`：单词首字母大写（对于 "Heading-one" 这一类此，根据浏览器的实现可能只对第一个单词首字母大写，也可能两个单词首字母都大写，CSS并没有规定哪一种正确）
- `inherit`

### 文本装饰

`text-decoration`

默认为`none`，关闭所有装饰。装饰线的颜色与文本颜色相同。该属性不会继承，而且也不可以取消父元素的装饰线，因为父元素的装饰线会穿过子元素，因为是父元素的装饰线，所以颜色也是父元素的颜色，可能与子元素自身颜色不一样，可以对子元素单独设置以覆盖显示父元素的装饰线。

- `underline`
- `overline`
- `line-through`
- `inherit`
- `blink`：闪烁，很少浏览器支持。

### 文本阴影

`text-shadow`

每个阴影都由一个颜色值和 3 个长度值来定义，前两个长度值确定了阴影与文本的偏移距离，右、下为正，左、上为负值。第三个长度值为模糊半径，它为从阴影轮廓到模糊效果边界的距离，不指定该值则表示该偏移上的阴影不需要模糊。

多个阴影值之间用逗号隔开。

示例：

```css
div { text-shadow: 0 0 4px black;}
p { text-shadow: 5px .5em green, -1em -1em silver;}
```

### 处理空白符

`white-space`

默认值为 `normal`，默认情况下，浏览器会将换行符转换为空格，多个空格合并为一个空格。

- pre：类似于 `<pre>` 标签，不会对回车和空格进行处理，也不允许自动换行。
- nowrap：防止文本换行，除非使用 `<br>` 标签换行。
- pre-wrap：会保留空白符（换行符、空格等），并且文本能够正常换行。
- pre-line：保留换行符，但是会合并空格

| 值 | 空白符 | 换行符 | 自动换行 |
| :------------- | :------------- |
| pre-line | 合并 | 保留 | 允许 |
| normal | 合并 | 忽略 | 允许 |
| nowrap | 合并 | 忽略 | 不允许 |
| pre | 保留 | 保留 | 不允许 |
| pre-wrapo | 保留 | 保留 | 允许 |

# 第七章：基本视觉格式化
