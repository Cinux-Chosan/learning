

# 第四章：表达式与运算符
- 不同运算符之间，考虑优先级
- 多个相同优先级的运算符之间，考虑结合性（从左至右还是从右到左）
```js
var a = 1;
  a+ ++a; // 3
但是
  ++a+a; // 4


```
引用《JavaScript权威指南》 P69 的一段话：

`运算符的优先级和结合性规定了它们在复杂的表达式中的运算顺序，但并没有规定子表达式的计算过程中的运算属性，JavaScript总是严格的按照从左至右的顺序来计算表达式，例如：w = x + y * z 中，首先计算子表达式 w，然后是 x、y、z，然后 y * z，再加上 x，最后将其赋值给 w 所指代的变量或属性。给表达式添加圆括号将会改变乘法、加法和赋值运算的关系，但从左至右的顺序是不会改变的。`

上面的例子中， a+ ++a 看成 a + y ； ++a+a 看成 y + a；所以第一个表达式计算顺序为 a, ++a, a+ ++a，第二个为 ++a, a, ++a+a。第一个计算 ++a的时候a的值已经定了，但是第二个计算完++a的时候再去计算a，此时a已经为2，所以结果为4

++a 是先将 a + 1，然后返回增加过后的值，而 a++ 是先加 1，但是返回的是加之前的值。所以 ++a+a 是先执行 ++a，并使用 ++a 执行完成过后的值再与 a 相加，而 a+ ++a 是先计算 a，此时第一个 a 已经被替换为a的值1，然后再执行 ++a，并返回 ++a 执行之后的值，所以就是 1 + 2 得 3

1、  `++[[]][+[]]+[+[]]=?`
2、 `([][+[]]+[])[+!![]]=?`

- null 是关键字，被强制转换成整型的值是 0，即 +null 是 0
- undefined 是全局变量，不是关键字，被强制转换成整型的值是 NaN， 即 +undefined 是 NaN

- `+` 运算符首先考虑字符串拼接，其次考虑算术运算的加，即 `1 + '1'` 和 `'1' + 1` 结果都是 `'11'`。 （P70）
- 比较运算符`> <` 则首先考虑转换成数字，然后比较。（与 `+` 不同） （P77）
- `++` 运算符从不进行字符串连接操作，它总是会将操作数转换为数字并增 1 （P72）

位运算要求它的操作数是整数，这些整数表示为 32位整型而不是 64位浮点型。必要时，位运算符会首先将操作数转换为数字，并将数字强制转换为 32 位整型，这会忽略原格式中的小数部分和任何超过32位的二进制位，移位运算符要求右操作数介于 [0, 31] 之间。在将其操作数转换为无符号 32 位整数后，它们将舍弃第 5 位之后的二进制位，以便生成一个正确的数字。位运算符会把 NaN、Infinity 和 - Infinity 都转换为 0；

- `&` 按位与
- `|` 按位或
- `^` 按位异或
- `~` 按位非，相当于改变符号后减 1
- `<<` 左移，右边新出现的位用 0 补充，相当于乘以 2
- `>>` 右移，左边多出来的位用符号位补充，整数为 0，负数为 1，相当于除以 2
- `>>>` 无符号右移，左边高位总是补 0，结果转换为无符号数，即正数
